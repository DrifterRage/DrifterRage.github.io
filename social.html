<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Social - TwoRoadsDayZ</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link href="assets/style.css" rel="stylesheet">
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-TPFMB30C0P"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-TPFMB30C0P');
  </script>
</head>
<body>
  <div class="scroll-indicator"><div class="scroll-progress"></div></div>
  <div class="particles"></div>
  <nav id="navbar">
    <div class="nav-container">
      <a href="index.html" class="logo">TwoRoadsDayZ</a>
      <ul class="nav-links">
        <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
        <li><a href="join.html"><i class="fas fa-server"></i> Join</a></li>
        <li><a href="store.html"><i class="fas fa-shopping-cart"></i> Store</a></li>
        <li><a href="about.html"><i class="fas fa-info"></i> About</a></li>
        <li><a href="contact.html"><i class="fas fa-envelope"></i> Contact</a></li>
        <li><a href="social.html"><i class="fas fa-users"></i> Community</a></li>
        <li><a href="media.html"><i class="fas fa-play"></i> Media</a></li>
      </ul>
    </div>
  </nav>

<section id="top" class="hero">
  <div class="hero-content">
    <h1>Wasteland Social Network</h1>
    <p>Post your survival stories (saved in your browser).</p>
  </div>
</section>

<section>
  <div class="container">
    <h2 class="section-title fade-in">Your Feed</h2>
    <div class="contact-form fade-in" style="max-width:800px;margin:0 auto;">
      <div class="form-group">
        <label for="postText">New Post</label>
        <textarea id="postText" placeholder="Share what just happened..."></textarea>
      </div>
      <button class="submit-btn" id="postBtn"><i class="fas fa-plus"></i> Post</button>
    </div>

    <div class="section-divider"></div>

    <div id="feed" class="staff-grid"></div>
  </div>
</section>

<script>
(function() {
  const FEED_KEY = 'trd_feed_v1';
  const feedEl = document.getElementById('feed');
  const btn = document.getElementById('postBtn');
  const txt = document.getElementById('postText');

  function load() {
    feedEl.innerHTML = '';
    const items = JSON.parse(localStorage.getItem(FEED_KEY) || '[]');
    items.reverse().forEach((p) => {
      const card = document.createElement('div');
      card.className = 'staff-card fade-in visible';
      card.innerHTML = `
        <div class="staff-avatar"><i class="fas fa-user"></i></div>
        <h3>${p.author || 'Survivor'}</h3>
        <div class="staff-role">${new Date(p.ts).toLocaleString()}</div>
        <div class="staff-bio">${p.text}</div>
        <button class="buy-btn" data-id="${p.id}">Delete</button>
      `;
      feedEl.appendChild(card);
    });
  }

  btn?.addEventListener('click', function() {
    const text = txt.value.trim();
    if (!text) return;
    const items = JSON.parse(localStorage.getItem(FEED_KEY) || '[]');
    items.push({ id: Date.now(), ts: Date.now(), text });
    localStorage.setItem(FEED_KEY, JSON.stringify(items));
    txt.value='';
    load();
    if (typeof gtag !== 'undefined') {
      gtag('event', 'submit', { 'event_category':'Social', 'event_label':'Post_Submit' });
    }
  });

  feedEl.addEventListener('click', function(e) {
    const b = e.target.closest('button[data-id]');
    if (!b) return;
    const id = Number(b.getAttribute('data-id'));
    const items = JSON.parse(localStorage.getItem(FEED_KEY) || '[]').filter(i => i.id != id);
    localStorage.setItem(FEED_KEY, JSON.stringify(items));
    load();
  });

  load();
})();
</script>

  <a href="#top" class="fab"><i class="fas fa-chevron-up"></i></a>
  <script src="assets/script.js"></script>
</body>
</html>

